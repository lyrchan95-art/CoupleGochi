<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play Together - BondPets</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }
        
        body {
            background-color: #f0f9ff;
            background-image: 
                radial-gradient(#b3e0ff 1px, transparent 1px),
                radial-gradient(#ccebff 1px, transparent 1px);
            background-size: 30px 30px, 60px 60px;
            background-position: 0 0, 15px 15px;
            color: #5a4fcf;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #4cc9f0, #6bd4ff);
            border-radius: 25px;
            color: white;
            margin-bottom: 30px;
            width: 100%;
            max-width: 800px;
            box-shadow: 0 10px 25px rgba(76, 201, 240, 0.3);
            border: 5px solid white;
            position: relative;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.1);
        }
        
        .back-btn {
            position: absolute;
            left: 20px;
            top: 20px;
            background: white;
            color: #4cc9f0;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            transform: translateX(-5px);
            background: #e6f7ff;
        }
        
        .activity-container {
            background: white;
            border-radius: 25px;
            padding: 30px;
            width: 100%;
            max-width: 800px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 5px solid #b3e0ff;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .pet-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 30px auto;
        }
        
        .pet-body {
            width: 200px;
            height: 200px;
            background-color: #ffccd5;
            border-radius: 45% 45% 45% 45% / 50% 50% 50% 50%;
            position: relative;
            box-shadow: 
                inset 0 -10px 0 rgba(255, 107, 157, 0.2),
                0 10px 25px rgba(0,0,0,0.15);
            border: 8px solid #ff9ebb;
            margin: 0 auto;
            animation: happyBounce 0.5s infinite alternate;
        }
        
        @keyframes happyBounce {
            0% { transform: translateY(0px) rotate(0deg); }
            100% { transform: translateY(-20px) rotate(5deg); }
        }
        
        .pet-face {
            position: absolute;
            top: 60px;
            left: 60px;
            width: 80px;
            height: 80px;
        }
        
        .pet-eye {
            width: 20px;
            height: 20px;
            background-color: #333;
            border-radius: 50%;
            position: absolute;
            top: 20px;
            border: 4px solid white;
            box-shadow: 0 0 0 3px #ff6b9d;
            animation: blink 3s infinite;
        }
        
        @keyframes blink {
            0%, 95%, 100% { height: 20px; }
            96%, 99% { height: 5px; }
        }
        
        .pet-eye-left {
            left: 10px;
        }
        
        .pet-eye-right {
            right: 10px;
        }
        
        .pet-eye::after {
            content: "";
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: white;
            border-radius: 50%;
            top: 3px;
            left: 3px;
        }
        
        .pet-mouth {
            width: 40px;
            height: 20px;
            border-radius: 0 0 20px 20px;
            background-color: #ff4d6d;
            position: absolute;
            bottom: 10px;
            left: 20px;
            border: 3px solid #ff1e56;
            box-shadow: inset 0 5px 0 rgba(255,255,255,0.3);
        }
        
        .game-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .game-item {
            background: linear-gradient(135deg, #e6f7ff, #b3e0ff);
            padding: 25px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid white;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #0088cc;
        }
        
        .game-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            background: linear-gradient(135deg, #b3e0ff, #99d6ff);
        }
        
        .game-item.selected {
            background: linear-gradient(135deg, #ffd6e7, #ff9ebb);
            border-color: #ff6b9d;
            color: #ff1e56;
        }
        
        .game-item i {
            font-size: 3rem;
        }
        
        .points-info {
            background: linear-gradient(135deg, #e6f7ff, #d9f2ff);
            padding: 20px;
            border-radius: 20px;
            margin: 20px 0;
            border: 3px dashed #4cc9f0;
            font-size: 1.2rem;
        }
        
        .points-value {
            font-size: 2rem;
            font-weight: bold;
            color: #4cc9f0;
            margin: 10px 0;
        }
        
        .play-btn {
            background: linear-gradient(135deg, #ffd166, #ffb347);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 20px;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 10px 0 rgba(255, 179, 71, 0.5);
            transition: all 0.3s;
        }
        
        .play-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 0 rgba(255, 179, 71, 0.5);
        }
        
        .play-btn:active {
            transform: translateY(5px);
            box-shadow: 0 5px 0 rgba(255, 179, 71, 0.5);
        }
        
        .game-area {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
            border: 5px solid #b3e0ff;
            font-size: 1.3rem;
            display: none;
            animation: fadeIn 0.5s;
            min-height: 200px;
            position: relative;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .ball {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff6b9d, #ff9ebb);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }
        
        .ball:hover {
            transform: translate(-50%, -50%) scale(1.1);
        }
        
        .catch-counter {
            font-size: 3rem;
            font-weight: bold;
            color: #ff6b9d;
            margin: 20px 0;
        }
        
        .timer {
            font-size: 2rem;
            font-weight: bold;
            color: #4cc9f0;
            margin: 20px 0;
        }
        
        .shared-action {
            background: linear-gradient(135deg, #e6f7ff, #d9f2ff);
            padding: 20px;
            border-radius: 20px;
            margin-top: 30px;
            border: 3px solid #4cc9f0;
            text-align: center;
        }
        
        .partner-btn {
            background: linear-gradient(135deg, #ff6b9d, #ff4d6d);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 0 rgba(255, 77, 109, 0.5);
            transition: all 0.3s;
        }
        
        .partner-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 0 rgba(255, 77, 109, 0.5);
        }
        
        .result-message {
            background: linear-gradient(135deg, #ffecf1, #ffe6ee);
            padding: 20px;
            border-radius: 20px;
            margin: 20px 0;
            border: 5px solid #ffccd5;
            font-size: 1.3rem;
            display: none;
        }
        
        .footer {
            text-align: center;
            margin-top: 20px;
            color: #888;
            font-size: 0.9rem;
        }
        
        .partner-joined {
            background: #4cd97b;
            color: white;
            padding: 10px 20px;
            border-radius: 15px;
            margin: 10px 0;
            display: inline-block;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="back-btn" onclick="window.location.href='index.html'">
            <i class="fas fa-arrow-left"></i> Back
        </button>
        <h1><i class="fas fa-gamepad"></i> Play Together</h1>
        <p>Play games with your pet and earn relationship points!</p>
    </div>
    
    <div class="activity-container">
        <h2>Fluffball Wants to Play! ðŸŽ®</h2>
        <p style="margin: 15px 0; font-size: 1.2rem;">Choose a game to play with your pet. Playing together earns more points!</p>
        
        <div class="pet-container">
            <div class="pet-body">
                <div class="pet-face">
                    <div class="pet-eye pet-eye-left"></div>
                    <div class="pet-eye pet-eye-right"></div>
                    <div class="pet-mouth"></div>
                </div>
            </div>
        </div>
        
        <div class="game-options">
            <div class="game-item" data-game="catch" data-points="20">
                <i class="fas fa-baseball-ball"></i>
                <span>Catch the Ball</span>
                <small>+20 pts</small>
            </div>
            <div class="game-item" data-game="puzzle" data-points="25">
                <i class="fas fa-puzzle-piece"></i>
                <span>Pet Puzzle</span>
                <small>+25 pts</small>
            </div>
            <div class="game-item" data-game="race" data-points="30">
                <i class="fas fa-running"></i>
                <span>Racing Game</span>
                <small>+30 pts</small>
            </div>
            <div class="game-item" data-game="hide" data-points="15">
                <i class="fas fa-search"></i>
                <span>Hide & Seek</span>
                <small>+15 pts</small>
            </div>
        </div>
        
        <div class="points-info">
            <p>Points earned for this game:</p>
            <div class="points-value" id="points-value">0 points</div>
            <p>Playing together doubles the points earned!</p>
        </div>
        
        <div id="partner-status"></div>
        
        <button class="play-btn" id="play-btn">
            <i class="fas fa-play"></i> Start Playing!
        </button>
        
        <div class="game-area" id="game-area">
            <!-- Game will appear here -->
        </div>
        
        <div class="result-message" id="result-message">
            <!-- Result will appear here -->
        </div>
        
        <div class="shared-action">
            <h3><i class="fas fa-users"></i> Play Together</h3>
            <p>Invite your partner to play together for double points and better bonding!</p>
            <button class="partner-btn" id="invite-btn">
                <i class="fas fa-user-plus"></i> Invite Partner
            </button>
        </div>
    </div>
    
    <div class="footer">
        <p>BondPets - Strengthening relationships through shared pet care</p>
    </div>

    <script>
        let selectedGame = null;
        let selectedPoints = 0;
        let partnerJoined = false;
        let gameActive = false;
        let catchCount = 0;
        let timeLeft = 30;
        
        const gameItems = document.querySelectorAll('.game-item');
        const playBtn = document.getElementById('play-btn');
        const pointsValue = document.getElementById('points-value');
        const gameArea = document.getElementById('game-area');
        const resultMessage = document.getElementById('result-message');
        const partnerStatus = document.getElementById('partner-status');
        
        // Game descriptions
        const gameDescriptions = {
            catch: "Catch the bouncing ball as many times as you can in 30 seconds!",
            puzzle: "Solve a fun puzzle together with your pet!",
            race: "Race against your pet in a fun obstacle course!",
            hide: "Find your pet hiding in different locations!"
        };
        
        // Select game item
        gameItems.forEach(item => {
            item.addEventListener('click', () => {
                if (gameActive) return;
                
                // Remove selected class from all items
                gameItems.forEach(i => i.classList.remove('selected'));
                
                // Add selected class to clicked item
                item.classList.add('selected');
                
                // Set selected game and points
                selectedGame = item.dataset.game;
                selectedPoints = parseInt(item.dataset.points);
                
                // Update points display
                const totalPoints = partnerJoined ? selectedPoints * 2 : selectedPoints;
                pointsValue.textContent = `+${totalPoints} points`;
                pointsValue.style.color = partnerJoined ? '#ff6b9d' : '#4cc9f0';
                
                // Update play button
                playBtn.disabled = false;
                playBtn.innerHTML = `<i class="fas fa-play"></i> Play ${item.dataset.game.charAt(0).toUpperCase() + item.dataset.game.slice(1)}!`;
            });
        });
        
        // Start game
        playBtn.addEventListener('click', () => {
            if (!selectedGame) return;
            
            gameActive = true;
            playBtn.disabled = true;
            playBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading Game...';
            
            // Show game area after delay
            setTimeout(() => {
                gameArea.style.display = 'block';
                playBtn.style.display = 'none';
                
                // Load selected game
                loadGame(selectedGame);
            }, 1000);
        });
        
        // Load game
        function loadGame(gameType) {
            gameArea.innerHTML = `<h3>${gameType.charAt(0).toUpperCase() + gameType.slice(1)} Game</h3>`;
            
            if (gameType === 'catch') {
                loadCatchGame();
            } else {
                gameArea.innerHTML += `
                    <p style="margin: 20px 0;">${gameDescriptions[gameType]}</p>
                    <p style="margin: 20px 0; font-size: 1.5rem;">Game simulation...</p>
                    <div style="margin: 30px;">
                        <i class="fas fa-gamepad" style="font-size: 4rem; color: #4cc9f0;"></i>
                    </div>
                    <button class="play-btn" id="simulate-btn" style="padding: 15px 30px;">
                        <i class="fas fa-play"></i> Simulate Game
                    </button>
                `;
                
                document.getElementById('simulate-btn').addEventListener('click', () => {
                    simulateGame(gameType);
                });
            }
        }
        
        // Load catch game
        function loadCatchGame() {
            catchCount = 0;
            timeLeft = 30;
            
            gameArea.innerHTML += `
                <p style="margin: 20px 0;">${gameDescriptions.catch}</p>
                <div class="timer" id="timer">30s</div>
                <div class="catch-counter" id="catch-counter">0 catches</div>
                <div class="ball" id="ball"></div>
                <p style="margin-top: 20px;">Click the ball as many times as you can!</p>
            `;
            
            const ball = document.getElementById('ball');
            const catchCounter = document.getElementById('catch-counter');
            const timer = document.getElementById('timer');
            
            // Ball click handler
            ball.addEventListener('click', () => {
                if (timeLeft <= 0) return;
                
                catchCount++;
                catchCounter.textContent = `${catchCount} catch${catchCount !== 1 ? 'es' : ''}`;
                
                // Move ball randomly
                const x = Math.random() * 80 + 10;
                const y = Math.random() * 70 + 15;
                ball.style.left = `${x}%`;
                ball.style.top = `${y}%`;
                
                // Add visual feedback
                ball.style.transform = `translate(-50%, -50%) scale(0.9)`;
                setTimeout(() => {
                    ball.style.transform = `translate(-50%, -50%) scale(1)`;
                }, 100);
            });
            
            // Start timer
            const gameTimer = setInterval(() => {
                timeLeft--;
                timer.textContent = `${timeLeft}s`;
                
                if (timeLeft <= 10) {
                    timer.style.color = '#ff6b9d';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(gameTimer);
                    endCatchGame();
                }
            }, 1000);
        }
        
        // End catch game
        function endCatchGame() {
            const totalPoints = partnerJoined ? selectedPoints * 2 + catchCount : selectedPoints + catchCount;
            
            gameArea.innerHTML = `
                <h3>Game Over!</h3>
                <div class="catch-counter" style="font-size: 4rem;">${catchCount}</div>
                <p style="font-size: 1.5rem; margin: 20px 0;">Total catches!</p>
                <p style="margin: 20px 0;">You earned ${totalPoints} points!</p>
                <button class="play-btn" id="play-again-btn" style="padding: 15px 30px;">
                    <i class="fas fa-redo"></i> Play Again
                </button>
            `;
            
            document.getElementById('play-again-btn').addEventListener('click', () => {
                loadGame('catch');
            });
            
            // Show result message
            showResult(totalPoints, catchCount);
        }
        
        // Simulate other games
        function simulateGame(gameType) {
            const simulatedScore = Math.floor(Math.random() * 100) + 50;
            const totalPoints = partnerJoined ? selectedPoints * 2 + simulatedScore : selectedPoints + simulatedScore;
            
            gameArea.innerHTML = `
                <h3>Game Complete!</h3>
                <div class="catch-counter" style="font-size: 4rem; color: #4cc9f0;">${simulatedScore}</div>
                <p style="font-size: 1.5rem; margin: 20px 0;">Your score!</p>
                <p style="margin: 20px 0;">You earned ${totalPoints} points!</p>
                <button class="play-btn" id="back-btn" style="padding: 15px 30px;">
                    <i class="fas fa-arrow-left"></i> Back to Games
                </button>
            `;
            
            document.getElementById('back-btn').addEventListener('click', () => {
                gameArea.style.display = 'none';
                playBtn.style.display = 'flex';
                playBtn.disabled = false;
                playBtn.innerHTML = `<i class="fas fa-play"></i> Play Another Game!`;
                gameActive = false;
            });
            
            // Show result message
            showResult(totalPoints, simulatedScore);
        }
        
        // Show result
        function showResult(points, score) {
            resultMessage.innerHTML = `
                <h3><i class="fas fa-trophy"></i> Great Job!</h3>
                <p>You earned <strong>${points} points</strong> with a score of ${score}!</p>
                <p style="margin-top: 15px;">
                    <i class="fas fa-heart" style="color:#ff6b9d;"></i> Pet happiness increased by ${Math.floor(score/10)}%<br>
                    <i class="fas fa-link" style="color:#4cc9f0;"></i> Bond increased by ${Math.floor(score/20)}%
                </p>
                ${partnerJoined ? '<p class="partner-joined"><i class="fas fa-users"></i> Double points for playing together!</p>' : ''}
            `;
            resultMessage.style.display = 'block';
            
            // Show notification
            showNotification(`You earned ${points} points playing with Fluffball!`, "success");
        }
        
        // Invite partner
        document.getElementById('invite-btn').addEventListener('click', () => {
            showNotification("Invitation sent to your partner!", "info");
            
            // Simulate partner joining after delay
            setTimeout(() => {
                partnerJoined = true;
                partnerStatus.innerHTML = '<div class="partner-joined"><i class="fas fa-user-check"></i> Partner has joined! Double points activated!</div>';
                
                // Update points display
                if (selectedGame) {
                    const totalPoints = selectedPoints * 2;
                    pointsValue.textContent = `+${totalPoints} points`;
                    pointsValue.style.color = '#ff6b9d';
                }
                
                showNotification("Your partner has joined! You'll both earn double points!", "success");
            }, 2000);
        });
        
        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: ${type === 'warning' ? '#ffd166' : type === 'info' ? '#4cc9f0' : type === 'success' ? '#4cd97b' : '#7b6cf6'};
                color: white;
                border-radius: 15px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideIn 0.3s ease-out;
                font-weight: bold;
                border: 3px solid white;
                max-width: 300px;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }
        
        // Add CSS for notification animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>